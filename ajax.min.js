var ajax={};function saveSubData(){var e=document.querySelector("#ssid_name").value,t=document.querySelector("#ssid_password").value,n=document.querySelector("#mqtt_host").value,o=document.querySelector("#mqtt_port").value,a=document.querySelector("#mqtt_client").value,r=document.querySelector("#mqtt_username").value,u=document.querySelector("#mqtt_password").value,s=document.querySelector("#mqtt_topic").value,c=document.querySelector("#mqtt_qos").value,i=document.querySelector("#enable").value;return ajax.post("save-subscribtion",{action:"save-subscribtion",ssid_name:e,ssid_password:t,mqtt_host:n,mqtt_port:o,mqtt_client:a,mqtt_username:r,mqtt_password:u,mqtt_topic:s,mqtt_qos:c,enable:i},function(e){},!0),!1}function loadSubData(){ajax.get("subscribtion-configuration.json",{},function(e){try{var t=JSON.parse(e);document.querySelector("#ssid_name").value=t.ssid_name,document.querySelector("#ssid_password").value=t.ssid_password,document.querySelector("#mqtt_host").value=t.mqtt_host,document.querySelector("#mqtt_port").value=t.mqtt_port,document.querySelector("#mqtt_client").value=t.mqtt_client,document.querySelector("#mqtt_username").value=t.mqtt_username,document.querySelector("#mqtt_password").value=t.mqtt_password,document.querySelector("#mqtt_topic").value=t.mqtt_topic,document.querySelector("#mqtt_qos").value=t.mqtt_qos,document.querySelector("#enable").value=t.enable}catch(e){}},!0)}function loadAPData(){ajax.get("ap-configuration.json",{},function(e){try{var t=JSON.parse(e);document.querySelector("#ssid_name").value=t.ssid_name,document.querySelector("#ssid_password").value=t.ssid_password,document.querySelector("#ip").value=t.ip,document.querySelector("#gateway").value=t.gateway,document.querySelector("#subnet").value=t.subnet,document.querySelector("#hidden").value=t.hidden}catch(e){}},!0)}function saveAPData(){var e=document.querySelector("#ssid_name").value,t=document.querySelector("#ssid_password").value,n=document.querySelector("#ip").value,o=document.querySelector("#gateway").value,a=document.querySelector("#subnet").value,r=document.querySelector("#hidden").value;return ajax.post("save-ap",{action:"save-ap",ssid_name:e,ssid_password:t,ip:n,gateway:o,subnet:a,hidden:r},function(e){},!0),!1}function handleIP(e){e=e.target;isValidIP(e.value)?e.classList.remove("invalid-ip"):(e.classList.remove("invalid-ip"),e.classList.add("invalid-ip"))}function isValidIP(e){if(0==e.length)return!0;var t,n=e.split(".");if(4!=n.length)return!1;for(t in n){if(isNaN(parseInt(n[t])))return!1;if(n[t]<0||255<n[t])return!1}return!0}ajax.create=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,t=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=0;n<t.length;n++)try{e=new ActiveXObject(t[n]);break}catch(e){}return e},ajax.send=function(e,t,n,o,a){void 0===a&&(a=!0);var r=ajax.create();r.open(n,e,a),r.onreadystatechange=function(){4==r.readyState&&t(r.responseText)},"POST"==n&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(o)},ajax.get=function(e,t,n,o){var a,r=[];for(a in t)t.hasOwnProperty(a)&&r.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));ajax.send(e+(r.length?"?"+r.join("&"):""),n,"GET",null,o)},ajax.post=function(e,t,n,o){var a,r=[];for(a in t)t.hasOwnProperty(a)&&r.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));ajax.send(e,n,"POST",r.join("&"),o)},window.onload=function(){var e=window.location.toString();-1<e.indexOf("ap-configuration.html")&&loadAPData(),-1<e.indexOf("subscribtion-configuration.html")&&loadSubData();const t=document.querySelectorAll('input[type="ipaddress"]');if(t.length)for(var n=0;n<t.length;n++)t[n].addEventListener("keyup",function(e){handleIP(e)}),t[n].addEventListener("change",function(e){handleIP(e)})};