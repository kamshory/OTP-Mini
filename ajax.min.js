var ajax={};function saveSubData(){var e=document.querySelector("#ssid_name").value,t=document.querySelector("#ssid_password").value,n=document.querySelector("#ws_host").value,a=document.querySelector("#ws_port").value,o=document.querySelector("#ws_client").value,r=document.querySelector("#ws_username").value,s=document.querySelector("#ws_password").value,u=document.querySelector("#ws_topic").value,c=document.querySelector("#ws_qos").value,i=document.querySelector("#enable").value;return ajax.post("save-subscribtion",{action:"save-subscribtion",ssid_name:e,ssid_password:t,ws_host:n,ws_port:a,ws_client:o,ws_username:r,ws_password:s,ws_topic:u,ws_qos:c,enable:i},function(e){},!0),!1}function loadSubData(){ajax.get("subscribtion-configuration.json",{},function(e){try{var t=JSON.parse(e);document.querySelector("#ssid_name").value=t.ssid_name,document.querySelector("#ssid_password").value=t.ssid_password,document.querySelector("#ws_host").value=t.ws_host,document.querySelector("#ws_port").value=t.ws_port,document.querySelector("#ws_client").value=t.ws_client,document.querySelector("#ws_username").value=t.ws_username,document.querySelector("#ws_password").value=t.ws_password,document.querySelector("#ws_topic").value=t.ws_topic,document.querySelector("#enable").value=t.enable}catch(e){}},!0)}function loadAPData(){ajax.get("ap-configuration.json",{},function(e){try{var t=JSON.parse(e);document.querySelector("#ssid_name").value=t.ssid_name,document.querySelector("#ssid_password").value=t.ssid_password,document.querySelector("#ip").value=t.ip,document.querySelector("#gateway").value=t.gateway,document.querySelector("#subnet").value=t.subnet,document.querySelector("#hidden").value=t.hidden}catch(e){}},!0)}function saveAPData(){var e=document.querySelector("#ssid_name").value,t=document.querySelector("#ssid_password").value,n=document.querySelector("#ip").ip,a=document.querySelector("#gateway").value,o=document.querySelector("#subnet").value,r=document.querySelector("#hidden").value;return ajax.post("save-ap",{action:"save-ap",ssid_name:e,ssid_password:t,ip:n,gateway:a,subnet:o,hidden:r},function(e){},!0),!1}function handleIP(e){e=e.target;isValidIP(e.value)?e.classList.remove("invalid-ip"):(e.classList.remove("invalid-ip"),e.classList.add("invalid-ip"))}function isValidIP(e){if(0==e.length)return!0;var t,n=e.split(".");if(4!=n.length)return!1;for(t in n){if(isNaN(parseInt(n[t])))return!1;if(n[t]<0||255<n[t])return!1}return!0}ajax.create=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,t=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=0;n<t.length;n++)try{e=new ActiveXObject(t[n]);break}catch(e){}return e},ajax.send=function(e,t,n,a,o){void 0===o&&(o=!0);var r=ajax.create();r.open(n,e,o),r.onreadystatechange=function(){4==r.readyState&&t(r.responseText)},"POST"==n&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(a)},ajax.get=function(e,t,n,a){var o,r=[];for(o in t)t.hasOwnProperty(o)&&r.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));ajax.send(e+(r.length?"?"+r.join("&"):""),n,"GET",null,a)},ajax.post=function(e,t,n,a){var o,r=[];for(o in t)t.hasOwnProperty(o)&&r.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));ajax.send(e,n,"POST",r.join("&"),a)},window.onload=function(){var e=window.location.toString();-1<e.indexOf("ap-configuration.html")&&loadAPData(),-1<e.indexOf("subscribtion-configuration.html")&&loadSubData();const t=document.querySelectorAll('input[type="ipaddress"]');if(t.length)for(var n=0;n<t.length;n++)t[n].addEventListener("keyup",function(e){handleIP(e)}),t[n].addEventListener("change",function(e){handleIP(e)})};